(()=>{"use strict";var e={19:function(e,t,n){let o;var i=n(3),r=n(312),l=n(457),a=n(335),s=n(737),d=n(87),u=n(137),c=n(109);function h(e){return document.querySelector(e)}let f=h("#cvs"),p=h("#hide"),w=h("#config"),v=h("#mode"),g=h("#size"),m=h("#color"),b=h("#showlonlat"),P=h("#lonlatcolor"),y=h("#hidpi"),L=h("#undo"),E=h("#clear"),k=h("#export"),x=h("#import");p.addEventListener("change",()=>{w.hidden=p.checked});let z=new s.xsS,j=new d.CP7({canvas:f});j.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(f);let T=!1;function M(){T||(T=!0,requestAnimationFrame(()=>{T=!1,j.render(z,D)}))}M(),window.addEventListener("resize",()=>{D.aspect=window.innerWidth/window.innerHeight,D.updateProjectionMatrix(),j.setSize(window.innerWidth,window.innerHeight),M()}),y.addEventListener("change",function e(){null==o||o(),j.setPixelRatio(y.checked?window.devicePixelRatio:1),M();let t=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);t.addEventListener("change",e),o=()=>t.removeEventListener("change",e)});let O=window.innerWidth/window.innerHeight,D=new s.cPb(50,O,1,100);D.position.set(0,0,10);let S=new i.z(D,f);S.listenToKeyEvents(window),S.target.set(0,0,0),S.enablePan=!1,S.minDistance=1,S.maxDistance=30,S.update(),S.addEventListener("change",M);let A=NaN;function F(){let e=S.getDistance();1e-6>Math.abs(A-e)||(A=e,D.zoom=2/e**.6,D.updateProjectionMatrix(),M())}F(),S.addEventListener("change",F),v.addEventListener("change",()=>{S.enabled=!v.checked});let H=new s.aLr(new s.Pa4(0,0,0),50);{let e=new s.ZAu;z.add(e);let t=new s.nls({color:P.value});for(let n=0;n<6;n++){let o=Math.PI/2/6*n,i=new s.T__(0,0,50*Math.cos(o)),r=new s.u9r().setFromPoints(i.getPoints(50)),l=50*Math.sin(o),a=new s.x12(r,t);if(a.position.set(0,l,0),a.rotation.set(Math.PI/2,0,0),e.add(a),0===n)continue;let d=new s.x12(r,t);d.position.set(0,-l,0),d.rotation.set(Math.PI/2,0,0),e.add(d)}{let n=new s.T__(0,0,50),o=new s.u9r().setFromPoints(n.getPoints(50));for(let n=0;n<12;n++){let i=Math.PI/12*n,r=new s.x12(o,t);r.position.set(0,0,0),r.rotation.set(0,i,0),e.add(r)}}P.addEventListener("change",()=>{t.color.set(P.value),M()}),b.addEventListener("change",()=>{e.visible=b.checked,M()})}let I=[],W={};f.addEventListener("touchstart",e=>{R(e.changedTouches)&&e.preventDefault()}),f.addEventListener("mousedown",e=>{R([e])&&e.preventDefault()}),f.addEventListener("touchmove",e=>{B(e.changedTouches)&&e.preventDefault()}),f.addEventListener("mousemove",e=>{B([e])&&e.preventDefault()}),f.addEventListener("touchend",e=>{K(e.changedTouches)&&e.preventDefault()}),f.addEventListener("mouseup",e=>{K([e])&&e.preventDefault()}),f.addEventListener("touchcancel",e=>{N(e.changedTouches)&&e.preventDefault()}),f.addEventListener("mouseout",e=>{N([e])&&e.preventDefault()});let _=new s.iMs(void 0,void 0,1,100),C=new s.FM8;function Y(e){return C.x=e.clientX/window.innerWidth*2-1,C.y=-(2*(e.clientY/window.innerHeight))+1,_.setFromCamera(C,D),_.ray.intersectSphere(H,new s.Pa4)}function R(e){if(!v.checked)return!1;for(let t=0;t<e.length;t++){let n=e[t].identifier??0;if(null!=W[n])throw W[n];W[n]={data:{points:[Y(e[t])],size:g.valueAsNumber,color:new s.Ilk(m.value)}}}return!0}function B(e){let t=!1;for(let n=0;n<e.length;n++){let o=e[n].identifier??0;if(null==W[o])continue;t=!0;let i=W[o].data,r=i.points,l=Y(e[n]);if(r.push(l),null==W[o].obj){let e=new s.ZAu;z.add(e);let t=q(i.size,i.color);W[o].obj={group:e,geo:[],mater:t}}let{geo:a,obj:d}=U([r[r.length-2],l],W[o].obj.mater);W[o].obj.geo.push(a),W[o].obj.group.add(d)}return t&&M(),t}function K(e){for(let t=0;t<e.length;t++){let n;let o=e[t].identifier??0;if(null==W[o])continue;let{data:i,obj:r}=W[o];n=null==r?Z(i):{data:i,...U(i.points,r.mater),mater:r.mater},z.add(n.obj),I.push(n)}return N(e)}function N(e){let t=!1;for(let n=0;n<e.length;n++){let o=e[n].identifier??0;if(null==W[o])continue;t=!0;let i=W[o].obj;if(delete W[o],null!=i)for(let e of(z.remove(i.group),i.geo))e.dispose()}return t&&M(),t}function q(e,t){return 0===e?new s.nls({color:t,depthTest:!1}):new r.Y({color:t,linewidth:e,worldUnits:!0,depthTest:!1})}function U(e,t){if(t instanceof r.Y){let n=new l.L().setFromPoints(e),o=new a.w(n,t);return{geo:n,obj:o}}{let n=new s.u9r().setFromPoints(e),o=new s.x12(n,t);return{geo:n,obj:o}}}function Z(e){if(0===e.size){let t=new s.u9r().setFromPoints(e.points),n=new s.UY4({color:e.color,size:4,sizeAttenuation:!1,depthTest:!1}),o=new s.woe(t,n);return{data:e,geo:t,obj:o,mater:n}}{let t=new s.zf8(e.size,15+2*e.size),n=new s.vBJ({color:e.color,depthTest:!1}),o=new s.Kj0(t,n);return o.position.copy(e.points[0]),o.lookAt(0,0,0),{data:e,geo:t,obj:o,mater:n}}}function J(){let e=I.pop();return null!=e&&(z.remove(e.obj),e.geo.dispose(),e.mater.dispose(),!0)}window.addEventListener("keydown",e=>{"z"===e.key&&e.ctrlKey&&(e.preventDefault(),J(),M())}),L.addEventListener("click",()=>{J(),M()}),E.addEventListener("click",()=>{for(;J(););M()});let X="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",G=(0,c.createToBase64)(X,""),Q=(0,c.createFromBase64)(X,!0),V=new u.wk({useRecords:!0,useFloat32:u.fy.ALWAYS});function $(e){let t=V.unpack(Q(e));for(;J(););for(let e of t){let t={size:e.size,color:new s.Ilk(e.color),points:[new s.Pa4().fromArray(e.first)]},n=t.points[0],o=e.points;for(let e=0;e<o.length;e+=3)n=new s.Pa4(o[e],o[e+1],o[e+2]).divideScalar(1e4).add(n),t.points.push(n);if(1===t.points.length){let e=Z(t);z.add(e.obj),I.push(e)}else{let e=q(t.size,t.color),n=U(t.points,e);z.add(n.obj),I.push({...n,data:t,mater:e})}}}if(k.addEventListener("click",()=>{let e=I.map(e=>{let{data:t}=e,n=[],o=e=>0|1e4*e;for(let e=1;e<t.points.length;e++){let i=t.points[e],r=t.points[e-1];n.push(o(i.x)-o(r.x),o(i.y)-o(r.y),o(i.z)-o(r.z))}return{size:t.size,color:t.color.getHex(),first:t.points[0].toArray(),points:n}}),t=V.encode(e),n=G(t,t.length);location.hash="#"+n,navigator.clipboard.writeText(n),alert("图像数据已复制")}),x.addEventListener("click",()=>{let e=prompt("请输入复制的图像数据");e&&($(e),location.hash="#"+e,M())}),location.hash.length>1)try{$(location.hash.substring(1))}catch{}}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}n.m=e,n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e=[];n.O=function(t,o,i,r){if(o){r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[o,i,r];return}for(var a=1/0,l=0;l<e.length;l++){for(var o=e[l][0],i=e[l][1],r=e[l][2],s=!0,d=0;d<o.length;d++)(!1&r||a>=r)&&Object.keys(n.O).every(function(e){return n.O[e](o[d])})?o.splice(d--,1):(s=!1,r<a&&(a=r));if(s){e.splice(l--,1);var u=i();void 0!==u&&(t=u)}}return t}})(),n.rv=function(){return"1.2.2"},(()=>{var e={980:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var i,r,l=o[0],a=o[1],s=o[2],d=0;if(l.some(function(t){return 0!==e[t]})){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(s)var u=s(n)}for(t&&t(o);d<l.length;d++)r=l[d],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(u)},o=self.webpackChunkhuntian=self.webpackChunkhuntian||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})(),n.ruid="bundler=rspack@1.2.2";var o=n.O(void 0,["51"],function(){return n(19)});o=n.O(o)})();